<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>统一排班-测试js</title>
    <link rel="stylesheet" href="demo1.css">
</head>
<body>
<!-- 排班表格 -->
<div>
<table border="1">
    <th>姓名</th>
    <th>时间</th>
    <tr>
        <td>Seaton</td>
        <td class="select-class"></td>
    </tr>
    <tr>
        <td>叶晓东</td>
        <td class="select-class"></td>
    </tr>
</table>
</div>
<hr>
<!-- 当前选择的班次 -->
<div>
    <span>排班样式</span>
    <div id="optionaling-class"></div>
    <input id="multipleClass" name="multipleClass" type="checkbox" value="true">多班次

    <button onclick="test()">测试</button>
</div>
<hr>

<!-- 可选择的班次 -->
<div data-id="1" data-name="早班" data-color="#00FF00" class="show-data optional-class" style="background-color:#00FF00;">
    <span class= "data-main" >早班</span>
    <span class="data-top">上</span>
    <span class="data-bottom">下</span>
</div>
<div data-id="2" data-name="午班"  data-color="#00FF00"  class="show-data optional-class" style="background-color:#00FF00;">
    <span class= "data-main" >午班</span>
    <span class="data-top"></span>
    <span class="data-bottom">下</span>
</div>
<div data-id="3" data-name="晚班" data-color="#00FF00" class="show-data optional-class" style="background-color:#00FF00;">
    <span class= "data-main" >晚班</span>
    <span class="data-top">上</span>
    <span class="data-bottom"></span>
</div>

<script src="../Scripts/jquery-1.11.3.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
       $(".optional-class").click(optionalClass);
    });

    //单击班次事件
    function optionalClass() {
        var isMultipleClass = $("#multipleClass").is(":checked");//是否多班次
        var clickClass = $(this).clone().removeClass("optional-class").addClass("optionaled-class");
        //var selectClass =  $(this).clone().removeClass("optional-class").addClass("selected-class").removeAttr("style");
        var selectClass = "<span id='" + $(this).attr("data-id") + "' class='selected-class' data-color='"
                + $(this).attr("data-color")+ "' data-isSelect='false'  onclick=\'selectedClass(this)\'>"
                + $(this).attr("data-name")+"</span>";

        if(isMultipleClass){
            var clickClassID = clickClass.attr("data-id");
            if(isClassExist(clickClassID)){
                $("#optionaling-class").append(clickClass);
                $(".select-class").append(selectClass);
            }
        }else{
            $("#optionaling-class").html(clickClass);
            $(".select-class").html(selectClass);
        }
    }
    
    /*判断班次样式是否存在，存在返回false，不存在返回true */
    function  isClassExist(id) {
        var isResult = true;
        $(".optionaled-class").each(function () {
            if($(this).attr("data-id") == id){
                isResult = false;
                return false;
            }
        });
        return isResult;
    }

    //单击排班按钮
    function selectedClass(docClass) {
        var bColor = docClass.getAttribute("data-color");
        docClass.style.backgroundColor=bColor;
        docClass.setAttribute("isselect","true");
    }
    
    //测试选择项
    function test() {
        var isselect = $(".selected-class").attr("isselect");
        if(isselect){
            alert("d");
        }
    }
</script>
</body>
</html>