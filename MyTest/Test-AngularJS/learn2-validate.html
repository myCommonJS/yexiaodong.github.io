<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Angular表单验证</title>
    <style>
        .error{
            border-color:red ;
        }
        .txt-error{
            color:red;
        }
        pre{
            width: 500px;
            border: 1px solid #333;
            background-color:#ccc;
        }
        div{
            margin: 10px;;
        }
    </style>
</head>
<body ng-app="myApp">


    <input ng-model = "name" ng-minlength="4" ng-maxlength="10">
    <div>{{name}}</div>
    <section>
        <h1>分析</h1>
        <ul>
            <li>1.ng-app="myApp"的写法：？？、</li>
            <li>2.使用该写法时必须声明一个myApp，如learn2.js中的内容</li>
            <li>3.ng-minlength/ng-maxlengt是约束，最小长度和最大长度</li>
        </ul>
    </section>

    <br>
    <hr>
    <br>
    <h1>简单的验证-submit/class/if</h1>
    <form name="signUpForm" ng-submit="submitForm()"  ng-controller="mainController">
        <div>
            <label>用户名：</label>
            <input name="username"
                   ng-model="username"
                   ng-class="{'error':signUpForm.username.$invalid && signUpForm.username.$touched}"
                   ng-minlength="4"
                   required
                   class="test">

            <div class="txt-error" ng-if="signUpForm.username.$invalid  && signUpForm.username.$touched">输入有误</div>
            <div ng-if="signUpForm.username.$valid  && signUpForm.username.$touched">验证通过</div>
        </div>
    </form>
    <section>
        <h1>分析</h1>
        <ul>
            <li>1.ng-submit：表单提交执行执行的方法，方法已在learn2.js中定义</li>
            <li>2.使用ng-submit前必须定义ng-controller,否则submit不知道去哪找submitForm（）</li>
            <li>3.input必须有ng-model</li>
            <li>4.ng-class添加样式，其值是一个对象，key是当value为true时添加到class中的名称</li>
            <li>5.signUpForm.username.$invalid：不合法，根据input里面的属性进行验证，验证不通过是返回true</li>
            <li>5.signUpForm.username.$valid：合法，根据input里面的属性进行验证，验证通过是返回true</li>
            <li>6.signUpForm.username.$touched：必须是点中后才，返回true</li>
            <li>7.在文本框中输入内容后，按回车键，表单就会提交</li>
            <li>8.ng-if，如果输入的内容返回true，则显示，否则隐藏</li>
        </ul>
    </section>

    <br>
    <hr>
    <br>
    <h1>简单的验证-disabled</h1>
    <form name="signUpForm" ng-submit="submitForm()"  ng-controller="mainController">
        <div>
            <label>用户名：</label>
            <input name="username"
                   ng-model="username"
                   ng-class="{'error':signUpForm.username.$invalid && signUpForm.username.$touched}"
                   ng-minlength="4"
                   required
                   class="test">

        </div>
        <button type="submit" ng-disabled="signUpForm.$invalid">提交</button>
    </form>
    <section>
        <h1>分析</h1>
        <ul>
            <li>1.ng-disabled，当返回true是，禁用标签。可用于表单的提交按钮，当验证不通过时不可提交</li>
            <li></li>
            <li></li>
        </ul>
    </section>
    <hr>
    <section>
        <h1>注册</h1>
        <form name="signUpForm2"  ng-controller="SignUpController" ng-submit="submitForm()">
            <div>
                <label for="username">用户名</label>
                <!--  使用pre输出验证信息，进行调试
                <pre >{{signUpForm2.username}}</pre>
                <pre >合法：{{signUpForm2.username.$valid }}</pre>
                -->
                <input name="username" type="text" ng-model="userdata.username" ng-minlength="4" ng-maxlength="32" required>
                <p class="txt-error" ng-if="
                signUpForm2.username.$error.required &&
                signUpForm2.username.$touched"
                   >用户名不可为空</p>
                <p class="txt-error" ng-if="
                (signUpForm2.username.$error.minlength ||
                signUpForm2.username.$error.maxlength) &&
                signUpForm2.username.$touched"
                    >用户名长度应在4至32位</p>
            </div>
            <div>
                <label for="password">密码</label>
                <input name="password" type="password" ng-model="userdata.password" ng-minlength="7" ng-maxlength="32" required>
                <p class="txt-error" ng-if="
                signUpForm2.password.$error.required &&
                signUpForm2.password.$touched"
                >密码不可为空</p>
                <p class="txt-error" ng-if="
                (signUpForm2.password.$error.minlength ||
                signUpForm2.password.$error.maxlength) &&
                signUpForm2.password.$touched"
                >密码长度应在7至32位</p>
            </div>
            <div>
                <label for="password2">重复密码</label>
                <input name="password2" type="password" ng-model="userdata.password2" required compare="userdata.password">
                <p class="txt-error" ng-if="
                signUpForm2.password2.$error.compare &&
                signUpForm2.password2.$touched"
                >两次输入不一致</p>
            </div>
            <div>
                <!-- 不要使用 input button，否则在iPhone中的样式不一致 -->
                <button type="submit">提交</button>
            </div>
        </form>
    </section>
    <script src="angular.min.js"></script>
    <script src="learn2.js"></script>
</body>
</html>